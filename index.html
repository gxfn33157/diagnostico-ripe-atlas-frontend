<body>
  <h1>Diagn√≥stico de Acesso</h1>

  <input id="dominio" placeholder="ex: google.com" />
  <button id="btn">Diagnosticar</button>

  <p id="status"></p>
  <pre id="resultado">Aguardando...</pre>

  <script type="module">
    import { diagnosticarDominio } from "/src/api.ts";

    const btn = document.getElementById("btn");
    const resultado = document.getElementById("resultado");
    const status = document.getElementById("status");

    btn.addEventListener("click", async () => {
      const dominio = document.getElementById("dominio").value;

      resultado.textContent = "";
      status.textContent = "üîç Executando diagn√≥stico global...";
      btn.disabled = true;

      try {
        const data = await diagnosticarDominio(dominio);

        status.textContent = `Status geral: ${data.status_geral}`;
        resultado.textContent = JSON.stringify(data, null, 2);
      } catch (e) {
        status.textContent = "‚ùå Erro ao executar diagn√≥stico";
        resultado.textContent = "";
      } finally {
        btn.disabled = false;
      }
    });
  </script>
</body>
